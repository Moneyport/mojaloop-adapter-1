<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1195px" preserveAspectRatio="none" style="width:1414px;height:1195px;" version="1.1" viewBox="0 0 1414 1195" width="1414px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mbw0ito2mnnp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="405" x="500" y="27.4023">Cross Network Transfer from TCIB (ISO 20022)</text><rect fill="#DDDDDD" height="1145.4473" style="stroke: #A80036; stroke-width: 1.0;" width="105" x="4" y="39.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="41.5" y="51.7676">TCIB</text><rect fill="#DDDDDD" height="1145.4473" style="stroke: #A80036; stroke-width: 1.0;" width="101" x="222" y="39.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="259" y="51.7676">CNP</text><rect fill="#DDDDDD" height="1145.4473" style="stroke: #A80036; stroke-width: 1.0;" width="123" x="597.5" y="39.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="628.5" y="51.7676">Mojaloop</text><rect fill="#DDDDDD" height="1145.4473" style="stroke: #A80036; stroke-width: 1.0;" width="125" x="890" y="39.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="929.5" y="51.7676">DFSP A</text><rect fill="#DDDDDD" height="1145.4473" style="stroke: #A80036; stroke-width: 1.0;" width="75" x="1326" y="39.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1341.5" y="51.7676">DFSP B</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="56" x2="56" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="56" x2="56" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56" x2="56" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="56" x2="56" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56" x2="56" y1="430.6816" y2="1129.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="272" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="272" x2="272" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="272" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="272" x2="272" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="272" y1="430.6816" y2="1129.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="632.5" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="632.5" x2="632.5" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="632.5" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="632.5" x2="632.5" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="632.5" y1="430.6816" y2="1129.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="694.5" x2="694.5" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="694.5" x2="694.5" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="694.5" x2="694.5" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="694.5" x2="694.5" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="694.5" x2="694.5" y1="430.6816" y2="1129.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="952" x2="952" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="952" x2="952" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="952" x2="952" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="952" x2="952" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="952" x2="952" y1="430.6816" y2="1129.6699"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363" x2="1363" y1="110.4863" y2="261.373"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1363" x2="1363" y1="261.373" y2="302.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363" x2="1363" y1="302.3281" y2="389.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1363" x2="1363" y1="389.7266" y2="430.6816"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363" x2="1363" y1="430.6816" y2="1129.6699"/><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="8" y="74.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="15" y="95.5332">TCIB Switch</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="8" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="15" y="1149.2051">TCIB Switch</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="226" y="74.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="233" y="95.5332">CNP Server</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="226" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="233" y="1149.2051">CNP Server</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="601.5" y="74.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="608.5" y="95.5332">Switch</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="601.5" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="608.5" y="1149.2051">Switch</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="673.5" y="74.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="680.5" y="95.5332">ALS</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="673.5" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="680.5" y="1149.2051">ALS</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="894" y="58.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="926.5" y="79.0449">DFSP A</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="901" y="95.5332">(CNP Sponsor)</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="894" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="926.5" y="1149.2051">DFSP A</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="901" y="1165.6934">(CNP Sponsor)</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="1330" y="58.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="1338.5" y="79.0449">DFSP B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="1337" y="95.5332">(Payee)</text><rect fill="#FEFECE" filter="url(#f1mbw0ito2mnnp)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="1330" y="1128.6699"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="1338.5" y="1149.2051">DFSP B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="1337" y="1165.6934">(Payee)</text><path d="M292,125.4863 L292,150.4863 L968,150.4863 L968,135.4863 L958,125.4863 L292,125.4863 " fill="#FBFB77" filter="url(#f1mbw0ito2mnnp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M958,125.4863 L958,135.4863 L968,135.4863 L958,125.4863 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="655" x="298" y="143.0547">This document aims to demonstrate the high level API Calls between the CNP, Mojaloop Hub and DFSPs.</text><polygon fill="#A80036" points="260.5,176.9297,270.5,180.9297,260.5,184.9297,264.5,180.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="266.5" y1="180.9297" y2="180.9297"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="63.5" y="175.8638">POST (pacs.008 request)</text><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1399" x="3" y="209.585"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="209.585" y2="209.585"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="212.585" y2="212.585"/><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="148" x="628.5" y="198.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="634.5" y="215.498">Discovery (Lookup)</text><polygon fill="#A80036" points="620.5,249.373,630.5,253.373,620.5,257.373,624.5,253.373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="626.5" y1="253.373" y2="253.373"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="279.5" y="248.3071">GET /parties/MSISDN/+4412345678</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="590.5" y="286.0078">Get participants/parties flow not shown here</text><polygon fill="#A80036" points="1351.5,319.4609,1361.5,323.4609,1351.5,327.4609,1355.5,323.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="1357.5" y1="323.4609" y2="323.4609"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="639.5" y="318.395">GET /parties/MSISDN/+4412345678</text><polygon fill="#A80036" points="643.5,348.5938,633.5,352.5938,643.5,356.5938,639.5,352.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="1362.5" y1="352.5938" y2="352.5938"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="649.5" y="347.5278">PUT /parties/MSISDN/+4412345678</text><polygon fill="#A80036" points="283.5,377.7266,273.5,381.7266,283.5,385.7266,279.5,381.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="277.5" x2="631.5" y1="381.7266" y2="381.7266"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="289.5" y="376.6606">PUT /parties/MSISDN/+4412345678</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="600.5" y="414.3613">CNP has found the payee and payee DFSP</text><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1399" x="3" y="451.3369"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="451.3369" y2="451.3369"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="454.3369" y2="454.3369"/><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="138" x="633.5" y="440.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="639.5" y="457.25">Agreement Phase</text><polygon fill="#A80036" points="620.5,491.125,630.5,495.125,620.5,499.125,624.5,495.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="626.5" y1="495.125" y2="495.125"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="279.5" y="490.0591">POST /thirdpartyRequests/transactions</text><polygon fill="#A80036" points="940.5,520.2578,950.5,524.2578,940.5,528.2578,944.5,524.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="946.5" y1="524.2578" y2="524.2578"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="639.5" y="519.1919">POST /thirdpartyRequests/transactions</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="952.5" x2="994.5" y1="553.5684" y2="553.5684"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="994.5" x2="994.5" y1="553.5684" y2="566.5684"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="953.5" x2="994.5" y1="566.5684" y2="566.5684"/><polygon fill="#A80036" points="963.5,562.5684,953.5,566.5684,963.5,570.5684,959.5,566.5684" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="959.5" y="548.8262">Lookup this</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="1038.5" y="548.5024">cnpId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="1078.5" y="548.8262">. Verify that they exist, and are able to send.</text><polygon fill="#A80036" points="643.5,591.7012,633.5,595.7012,643.5,599.7012,639.5,595.7012" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="951.5" y1="595.7012" y2="595.7012"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="649.5" y="590.6353">POST /quotes</text><polygon fill="#A80036" points="1351.5,620.834,1361.5,624.834,1351.5,628.834,1355.5,624.834" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="1357.5" y1="624.834" y2="624.834"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="639.5" y="619.7681">POST /quotes</text><polygon fill="#A80036" points="643.5,649.9668,633.5,653.9668,643.5,657.9668,639.5,653.9668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="1362.5" y1="653.9668" y2="653.9668"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="649.5" y="648.9009">PUT /quotes/456</text><polygon fill="#A80036" points="940.5,679.0996,950.5,683.0996,940.5,687.0996,944.5,683.0996" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="946.5" y1="683.0996" y2="683.0996"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="639.5" y="678.0337">PUT /quotes/456</text><path d="M675,696.0996 L675,736.0996 L943,736.0996 L943,706.0996 L933,696.0996 L675,696.0996 " fill="#FBFB77" filter="url(#f1mbw0ito2mnnp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M933,696.0996 L933,706.0996 L943,706.0996 L933,696.0996 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="681" y="713.668">DFSPA has the quote, they can now ask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="681" y="728.9785">the CNP for authorization</text><polygon fill="#A80036" points="643.5,762.8535,633.5,766.8535,643.5,770.8535,639.5,766.8535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="951.5" y1="766.8535" y2="766.8535"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="649.5" y="761.7876">POST /authorizations</text><polygon fill="#A80036" points="283.5,791.9863,273.5,795.9863,283.5,799.9863,279.5,795.9863" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="277.5" x2="631.5" y1="795.9863" y2="795.9863"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="289.5" y="790.9204">POST /authorizations</text><path d="M277,808.9863 L277,833.9863 L591,833.9863 L591,818.9863 L581,808.9863 L277,808.9863 " fill="#FBFB77" filter="url(#f1mbw0ito2mnnp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M581,808.9863 L581,818.9863 L591,818.9863 L581,808.9863 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="283" y="826.5547">CNP checks the quote and decides to continue</text><polygon fill="#A80036" points="620.5,860.4297,630.5,864.4297,620.5,868.4297,624.5,864.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="626.5" y1="864.4297" y2="864.4297"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="279.5" y="859.3638">PUT /authorizations/123</text><polygon fill="#A80036" points="940.5,889.5625,950.5,893.5625,940.5,897.5625,944.5,893.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="946.5" y1="893.5625" y2="893.5625"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="639.5" y="888.4966">PUT /authorizations/123</text><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1399" x="3" y="922.2178"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="922.2178" y2="922.2178"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1402" y1="925.2178" y2="925.2178"/><rect fill="#EEEEEE" filter="url(#f1mbw0ito2mnnp)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="120" x="642.5" y="911.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="648.5" y="928.1309">Transfer Phase</text><polygon fill="#A80036" points="643.5,962.0059,633.5,966.0059,643.5,970.0059,639.5,966.0059" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="951.5" y1="966.0059" y2="966.0059"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="649.5" y="960.9399">POST /transfers</text><polygon fill="#A80036" points="1351.5,991.1387,1361.5,995.1387,1351.5,999.1387,1355.5,995.1387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="1357.5" y1="995.1387" y2="995.1387"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="639.5" y="990.0728">POST /transfers</text><polygon fill="#A80036" points="643.5,1020.2715,633.5,1024.2715,643.5,1028.2715,639.5,1024.2715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="1362.5" y1="1024.2715" y2="1024.2715"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="649.5" y="1019.2056">PUT /transfers/321</text><polygon fill="#A80036" points="940.5,1049.4043,950.5,1053.4043,940.5,1057.4043,944.5,1053.4043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632.5" x2="946.5" y1="1053.4043" y2="1053.4043"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="639.5" y="1048.3384">PUT /transfers/321</text><polygon fill="#A80036" points="283.5,1078.5371,273.5,1082.5371,283.5,1086.5371,279.5,1082.5371" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="277.5" x2="631.5" y1="1082.5371" y2="1082.5371"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="289.5" y="1077.4712">PATCH /thirdpartyRequests/transactions/123</text><polygon fill="#A80036" points="67.5,1107.6699,57.5,1111.6699,67.5,1115.6699,63.5,1111.6699" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61.5" x2="271.5" y1="1111.6699" y2="1111.6699"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="73.5" y="1106.604">POST (pacs.008 response)</text><!--MD5=[4ffc0be30430f1225ca8db4020601138]
@startuml

title Cross Network Transfer from TCIB (ISO 20022)

!include participants_api.iuml

note over S
This document aims to demonstrate the high level API Calls between the CNP, Mojaloop Hub and DFSPs.
end note


TCIB - -> D1: ""POST (pacs.008 request)""

== Discovery (Lookup) ==
D1 -> S: ""GET /parties/MSISDN/+4412345678""
... Get participants/parties flow not shown here ...
S -> D3: ""GET /parties/MSISDN/+4412345678""
D3 -> S: ""PUT /parties/MSISDN/+4412345678""
S -> D1: ""PUT /parties/MSISDN/+4412345678""
... CNP has found the payee and payee DFSP ...

== Agreement Phase ==
D1 -> S: ""POST /thirdpartyRequests/transactions""
S -> D2: ""POST /thirdpartyRequests/transactions""

D2 -> D2: Lookup this ""cnpId"". Verify that they exist, and are able to send.

D2 -> S: ""POST /quotes""
S -> D3: ""POST /quotes""
D3 -> S: ""PUT /quotes/456""
S -> D2: ""PUT /quotes/456""

note left of D2
  DFSPA has the quote, they can now ask
  the CNP for authorization
end note

D2 -> S: ""POST /authorizations""
S -> D1: ""POST /authorizations""

note right of D1
  CNP checks the quote and decides to continue
end note

D1 -> S: ""PUT /authorizations/123""
S -> D2: ""PUT /authorizations/123""

== Transfer Phase ==

D2 -> S: ""POST /transfers""
S -> D3: ""POST /transfers""
D3 -> S: ""PUT /transfers/321""
S -> D2: ""PUT /transfers/321""
S -> D1: ""PATCH /thirdpartyRequests/transactions/123""
D1 - -> TCIB: ""POST (pacs.008 response)""

@enduml

@startuml

title Cross Network Transfer from TCIB (ISO 20022)

box "TCIB"
participant "TCIB Switch" as TCIB
end box
box "CNP"
participant "CNP Server" as D1
end box
box "Mojaloop"
    participant Switch as S
    participant "ALS" as A
end box
box "DFSP A"
    participant "DFSP A\n(CNP Sponsor)" as D2
end box
box "DFSP B"
    participant "DFSP B\n(Payee)" as D3
end box

note over S
This document aims to demonstrate the high level API Calls between the CNP, Mojaloop Hub and DFSPs.
end note


TCIB - -> D1: ""POST (pacs.008 request)""

== Discovery (Lookup) ==
D1 -> S: ""GET /parties/MSISDN/+4412345678""
... Get participants/parties flow not shown here ...
S -> D3: ""GET /parties/MSISDN/+4412345678""
D3 -> S: ""PUT /parties/MSISDN/+4412345678""
S -> D1: ""PUT /parties/MSISDN/+4412345678""
... CNP has found the payee and payee DFSP ...

== Agreement Phase ==
D1 -> S: ""POST /thirdpartyRequests/transactions""
S -> D2: ""POST /thirdpartyRequests/transactions""

D2 -> D2: Lookup this ""cnpId"". Verify that they exist, and are able to send.

D2 -> S: ""POST /quotes""
S -> D3: ""POST /quotes""
D3 -> S: ""PUT /quotes/456""
S -> D2: ""PUT /quotes/456""

note left of D2
  DFSPA has the quote, they can now ask
  the CNP for authorization
end note

D2 -> S: ""POST /authorizations""
S -> D1: ""POST /authorizations""

note right of D1
  CNP checks the quote and decides to continue
end note

D1 -> S: ""PUT /authorizations/123""
S -> D2: ""PUT /authorizations/123""

== Transfer Phase ==

D2 -> S: ""POST /transfers""
S -> D3: ""POST /transfers""
D3 -> S: ""PUT /transfers/321""
S -> D2: ""PUT /transfers/321""
S -> D1: ""PATCH /thirdpartyRequests/transactions/123""
D1 - -> TCIB: ""POST (pacs.008 response)""

@enduml

PlantUML version 1.2020.10(Sun May 17 11:35:57 SAST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14.0.2+12-46
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>